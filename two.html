<!doctype html>
<html>
  <head>
    <title>elliptic-shiho's labs</title>
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script type="text/javascript" src="js/two.min.js"></script>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/materialize.min.css">
<style type="text/css">
body,html {
  font-family: 'Source Code Pro' '游ゴシック' 'Meiryo' 'ヒラギノ角ゴ' 'sans-serif';
  min-height: 200px;
  height: 100vh;
}
h1,h2 {
  font-family: 'Stroke';
}
#bg {
  position:absolute;
  width:100%;
  height:100%;
  top:0;
  bottom: 0;
  z-index: -9999;
}
#contents {
  overflow-y: auto;
  height: 100vh;
}
#contents .btn {
  margin:4px;
}
</style>
    <script type="text/javascript">
$(function(){
  var elem = $("#bg").get(0);
  var params = { width: window.innerWidth, height: window.innerHeight, fullscreen: true, type: Two.Types["canvas"]};
  var two = new Two(params).appendTo(elem);
  var scale = 50;
  var baseX = 300;
  var baseY = 500;
  function dot(x, y) {
    var cursor = two.makeCircle(x * scale + baseX, y * scale + baseY, 2);
    cursor.fill = "#000000";
    cursor.noStroke();
  }
  function ellPoint(x, y) {
    var cursor = two.makeCircle(x * scale + baseX, y * scale + baseY, 10);
    cursor.fill = "#33ccff";
    cursor.noStroke();
    return cursor;
  }
  function setPos(obj, x, y) {
    obj.translation.set(x * scale + baseX, y * scale + baseY);
  }
  for(var i = 0; i < params.width + 50; i += 100) {
    for(var j = 0; j < params.height + 50; j += 100) {
      two.makeLine(i, 0, i, j).stroke = "#b5eae1";
      two.makeLine(0, j, i, j).stroke = "#b5eae1";
    }
  }
  // y^2 = x^3 + 4x + 5
  F = (function(x) {
    return x*x*x+4*x+5
  });
  var MS = -1;
  var THR = -0.95;
  var MX = 5;
  function corresponding_y(x) {
    return Math.sqrt(F(x));
  }
  for(var i = MS; i < THR; i += 0.001) {
    dot(i, corresponding_y(i));
    dot(i, -corresponding_y(i));
  }
  for(var i = THR; i < MX; i += 0.01) {
    dot(i, corresponding_y(i));
    dot(i, -corresponding_y(i));
  }
  var P = ellPoint(1, corresponding_y(1));
  var drag = function(e) {
    pct = (1 - e.clientY / two.height) * 3;
    var sig = 1;
    if (e.clientY / two.height <= 0.5) {
      sig = -1
    }
    setPos(P, pct, sig * corresponding_y(pct));
    two.update();
  };
  $(window).bind('mousemove', drag);
  $(window).bind('resize', (function() {
    two.update();
  }));
  two.update();
});
    </script>
  </head>
  <body>
    <div id="bg">
    </div>
  </body>
</html>
